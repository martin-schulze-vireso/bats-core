
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Usage &#8212; bats-core 1 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Docker Usage Guide" href="docker-usage.html" />
    <link rel="prev" title="Installation" href="installation.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="usage">
<h1>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h1>
<p>Bats comes with two manual pages. After installation you can view them with <code class="docutils literal notranslate"><span class="pre">man</span> <span class="pre">1</span> <span class="pre">bats</span></code> (usage manual) and <code class="docutils literal notranslate"><span class="pre">man</span> <span class="pre">7</span> <span class="pre">bats</span></code> (writing test files manual). Also, you
can view the available command line options that Bats supports by calling Bats
with the <code class="docutils literal notranslate"><span class="pre">-h</span></code> or <code class="docutils literal notranslate"><span class="pre">--help</span></code> options. These are the options that Bats currently
supports:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Bats 1.2.1
Usage: bats [OPTIONS] &lt;tests&gt;
       bats [-h | -v]

  &lt;tests&gt; is the path to a Bats test file, or the path to a directory
  containing Bats test files (ending with &quot;.bats&quot;)

  -c, --count               Count test cases without running any tests
  -f, --filter &lt;regex&gt;      Only run tests that match the regular expression
  -F, --formatter &lt;type&gt;    Switch between formatters: pretty (default),
                              tap (default w/o term), tap13, junit
  -h, --help                Display this help message
  -j, --jobs &lt;jobs&gt;         Number of parallel jobs (requires GNU parallel)
  --no-tempdir-cleanup      Preserve test output temporary directory
  --no-parallelize-across-files
                            Serialize test file execution instead of running
                            them in parallel (requires --jobs &gt;1)
  --no-parallelize-within-files
                            Serialize test execution within files instead of
                            running them in parallel (requires --jobs &gt;1)
  -o, --output &lt;dir&gt;        Directory to write report files
  -p, --pretty              Shorthand for &quot;--formatter pretty&quot;
  -r, --recursive           Include tests in subdirectories
  -t, --tap                 Shorthand for &quot;--formatter tap&quot;
  -T, --timing              Add timing information to tests
  -v, --version             Display the version number

  For more information, see https://github.com/bats-core/bats-core
</pre></div>
</div>
<p>To run your tests, invoke the <code class="docutils literal notranslate"><span class="pre">bats</span></code> interpreter with one or more paths to test
files ending with the <code class="docutils literal notranslate"><span class="pre">.bats</span></code> extension, or paths to directories containing test
files. (<code class="docutils literal notranslate"><span class="pre">bats</span></code> will only execute <code class="docutils literal notranslate"><span class="pre">.bats</span></code> files at the top level of each
directory; it will not recurse unless you specify the <code class="docutils literal notranslate"><span class="pre">-r</span></code> flag.)</p>
<p>Test cases from each file are run sequentially and in isolation. If all the test
cases pass, <code class="docutils literal notranslate"><span class="pre">bats</span></code> exits with a <code class="docutils literal notranslate"><span class="pre">0</span></code> status code. If there are any failures,
<code class="docutils literal notranslate"><span class="pre">bats</span></code> exits with a <code class="docutils literal notranslate"><span class="pre">1</span></code> status code.</p>
<p>When you run Bats from a terminal, you’ll see output as each test is performed,
with a check-mark next to the test’s name if it passes or an “X” if it fails.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ bats addition.bats
 ✓ addition using bc
 ✓ addition using dc

2 tests, 0 failures
</pre></div>
</div>
<p>If Bats is not connected to a terminal—in other words, if you run it from a
continuous integration system, or redirect its output to a file—the results are
displayed in human-readable, machine-parsable [TAP format][TAP].</p>
<p>You can force TAP output from a terminal by invoking Bats with the <code class="docutils literal notranslate"><span class="pre">--formatter</span> <span class="pre">tap</span></code>
option.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ bats --formatter tap addition.bats
1..2
ok 1 addition using bc
ok 2 addition using dc
</pre></div>
</div>
<p>With <code class="docutils literal notranslate"><span class="pre">--formatter</span> <span class="pre">junit</span></code>, it is possible
to output junit-compatible report files.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ bats --formatter junit addition.bats
1..2
ok 1 addition using bc
ok 2 addition using dc
</pre></div>
</div>
<p>Test reports will be output in the executing directory, but may be placed elsewhere
by specifying the <code class="docutils literal notranslate"><span class="pre">--output</span></code> flag.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ bats --formatter junit addition.bats --output /tmp
1..2
ok 1 addition using bc
ok 2 addition using dc
</pre></div>
</div>
<div class="section" id="parallel-execution">
<h2>Parallel Execution<a class="headerlink" href="#parallel-execution" title="Permalink to this headline">¶</a></h2>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.0.0.</span></p>
</div>
<p>By default, Bats will execute your tests serially. However, Bats supports
parallel execution of tests (provided you have <a class="reference external" href="https://www.gnu.org/software/parallel/">GNU parallel</a> or
a compatible replacement installed) using the <code class="docutils literal notranslate"><span class="pre">--jobs</span></code> parameter. This can
result in your tests completing faster (depending on your tests and the testing
hardware).</p>
<p>Ordering of parallised tests is not guaranteed, so this mode may break suites
with dependencies between tests (or tests that write to shared locations). When
enabling <code class="docutils literal notranslate"><span class="pre">--jobs</span></code> for the first time be sure to re-run bats multiple times to
identify any inter-test dependencies or non-deterministic test behaviour.</p>
<p>When parallelizing, the results of a file only become visible after it has been finished.
You can use <code class="docutils literal notranslate"><span class="pre">--no-parallelize-across-files</span></code> to get immediate output at the cost of reduced
overall parallelity, as parallelization will only happen within files and files will be run
sequentially.</p>
<p>If you have files where tests within the file would interfere with each other, you can use
<code class="docutils literal notranslate"><span class="pre">--no-parallelize-within-files</span></code> to disable parallelization within all files.
If you want more finegrained control, you can <code class="docutils literal notranslate"><span class="pre">export</span> <span class="pre">BATS_NO_PARALLELIZE_WITHIN_FILE=true</span></code> in <code class="docutils literal notranslate"><span class="pre">setup_file()</span></code>
or outside any function to disable parallelization only within the containing file.</p>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">bats-core</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Usage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#parallel-execution">Parallel Execution</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="docker-usage.html">Docker Usage Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="writing-tests.html">Writing tests</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="installation.html" title="previous chapter">Installation</a></li>
      <li>Next: <a href="docker-usage.html" title="next chapter">Docker Usage Guide</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








<h3>Versions</h3>
<ul>
  <li><a href="usage.html">master</a></li>
  <li><a href="https://github.com/bats-core/bats-core/blob/master/docs/versions.md">older versions</a></li>
</ul>

        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2020, bats-core origanization.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.2.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/usage.md.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>